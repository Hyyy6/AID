DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS credentials;
DROP TABLE IF EXISTS chats;

CREATE TABLE users (
    uuid CHAR(32),
    name TEXT NOT NULL,
    email TEXT NOT NULL,
    created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE credentials (
    uuid CHAR(32),
    passwd CHAR(64),
    salt CHAR(64),
    FOREIGN KEY(uuid) REFERENCES users (uuid)
);

CREATE TABLE chats (
    uuid INTEGER,
    history BLOB NOT NULL,
    FOREIGN KEY(uuid) REFERENCES users (uuid)
);